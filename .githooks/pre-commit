#!/bin/sh
# Pre-commit hook para ejecutar tests automÃ¡ticamente

echo "ğŸ§ª Ejecutando tests antes del commit..."

# Verificar si Node.js estÃ¡ disponible
if ! command -v node &> /dev/null; then
    echo "âŒ Node.js no estÃ¡ instalado"
    exit 1
fi

# Cambiar al directorio del proyecto
cd "$(git rev-parse --show-toplevel)"

# Ejecutar tests usando puppeteer o playwright
if command -v npx &> /dev/null; then
    # OpciÃ³n 1: Usar puppeteer para ejecutar tests headless
    npx puppeteer-cli --no-sandbox http://localhost:8000/test-suite.html
else
    echo "âš ï¸  Para tests automÃ¡ticos, instala: npm install -g puppeteer-cli"
    echo "ğŸ“ Por ahora, verifica manualmente: http://localhost:8000/test-suite.html"
fi

echo "âœ… Pre-commit check completado"
